{"version":3,"sources":["components/errorMessage/error.gif","components/errorMessage/errorMessage.js","services/MarvelService.js","hooks/http.hook.js","components/errorBoundary/ErrorBoundary.js","components/comicsList/ComicsList.js","resources/img/Avengers.png","resources/img/Avengers_logo.png","components/appBanner/AppBanner.js","components/pages/ComicsPage.js"],"names":["ErrorMessage","style","display","width","height","objectFit","margin","src","img","alt","useMarvelService","useState","process","setProcess","request","useCallback","url","a","method","body","headers","fetch","response","ok","Error","status","json","data","clearError","useHttp","_apiBase","_apiKey","getAllCharacters","offset","res","results","map","_transformCharacter","getAllComics","_transformComics","getCharacter","id","getComic","comic","name","title","description","count","pageCount","lang","textObjects","language","thumbnail","path","extension","price","prices","char","slice","homepage","urls","wiki","comics","items","ErrorBoundary","state","error","errorInfo","console","log","this","setState","props","children","Component","setContent","newItemLoading","Spinner","ComicsList","comicsList","setComicsList","setNewItemLoading","setOffset","comicsEnded","setComicsEnded","useEffect","onRequest","initial","then","onComicsListLoaded","newComicsList","ended","length","className","arr","item","i","imgStyle","to","renderItems","onClick","disabled","AppBanner","avengers","avengersLogo","ComicsPage"],"mappings":"iGAAe,UAA0B,kC,OCQ1BA,IANM,WACpB,OACC,qBAAKC,MAAO,CAAEC,QAAS,QAASC,MAAO,QAASC,OAAQ,QAAQC,UAAW,UAAWC,OAAQ,UAAYC,IAAKC,EAAKC,IAAI,Y,2ECqE3GC,IAvEU,WACxB,MCDsB,WACtB,MAA8BC,mBAAS,WAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAgCA,MAAO,CAAEC,QA9BOC,sBAAW,uCAC1B,WACCC,GADD,mCAAAC,EAAA,6DAECC,EAFD,+BAEU,MACTC,EAHD,+BAGQ,KACPC,EAJD,+BAIW,CAAE,eAAgB,oBAE5BP,EAAW,WANZ,kBAQyBQ,MAAML,EAAK,CAAEE,SAAQC,OAAMC,YARpD,WAQQE,EARR,QAUgBC,GAVhB,uBAWS,IAAIC,MAAJ,0BAA6BR,EAA7B,qBAA6CM,EAASG,SAX/D,yBAcqBH,EAASI,OAd9B,eAcQC,EAdR,yBAgBSA,GAhBT,wCAkBEd,EAAW,SAlBb,+DAD0B,sDAuB1B,IAOiBe,WAJCb,uBAAY,WAC9BF,EAAW,aACT,IAE2BD,UAASC,cDhCcgB,GAA7Cf,EAAR,EAAQA,QAASc,EAAjB,EAAiBA,WAAYhB,EAA7B,EAA6BA,QAASC,EAAtC,EAAsCA,WAEhCiB,EAAW,4CACXC,EAAU,0CAGVC,EAAgB,uCAAG,0CAAAf,EAAA,6DAAOgB,EAAP,+BAFL,IAEK,SACNnB,EAAQ,GAAD,OACrBgB,EADqB,qCACgBG,EADhB,YAC0BF,IAF3B,cAClBG,EADkB,yBAIjBA,EAAIP,KAAKQ,QAAQC,IAAIC,IAJJ,2CAAH,qDAOhBC,EAAY,uCAAG,0CAAArB,EAAA,6DAAOgB,EAAP,+BAAgB,EAAhB,SACFnB,EAAQ,GAAD,OACrBgB,EADqB,qDACgCG,EADhC,YAC0CF,IAF/C,cACdG,EADc,yBAKbA,EAAIP,KAAKQ,QAAQC,IAAIG,IALR,2CAAH,qDAQZC,EAAY,uCAAG,WAAMC,GAAN,eAAAxB,EAAA,sEACFH,EAAQ,GAAD,OAAIgB,EAAJ,sBAA0BW,EAA1B,aAAiCV,IADtC,cACdG,EADc,yBAEbG,EAAoBH,EAAIP,KAAKQ,QAAQ,KAFxB,2CAAH,sDAKZO,EAAQ,uCAAG,WAAMD,GAAN,eAAAxB,EAAA,sEACEH,EAAQ,GAAD,OAAIgB,EAAJ,kBAAsBW,EAAtB,aAA6BV,IADtC,cACVG,EADU,yBAETK,EAAiBL,EAAIP,KAAKQ,QAAQ,KAFzB,2CAAH,sDAKRI,EAAmB,SAAAI,GACxB,MAAO,CACNF,GAAIE,EAAMF,GACVG,KAAMD,EAAME,MACZC,YAAaH,EAAMG,aAAe,0BAClCC,MAAOJ,EAAMK,UAAN,UACDL,EAAMK,UADL,OAEJ,2CACHC,KAAMN,EAAMO,YAAYC,UAAY,QACpCC,UAAWT,EAAMS,UAAUC,KAAO,IAAMV,EAAMS,UAAUE,UACxDC,MAAOZ,EAAMa,OAAOD,MAAb,UAAwBZ,EAAMa,OAAOD,MAArC,KAAgD,kBAInDlB,EAAsB,SAAAoB,GAC3B,MAAO,CACNhB,GAAIgB,EAAKhB,GACTG,KAAMa,EAAKb,KACXE,YAAaW,EAAKX,YAAL,UACPW,EAAKX,YAAYY,MAAM,EAAG,KADnB,OAEV,6CACHN,UAAWK,EAAKL,UAAUC,KAAO,IAAMI,EAAKL,UAAUE,UACtDK,SAAUF,EAAKG,KAAK,GAAG5C,IACvB6C,KAAMJ,EAAKG,KAAK,GAAG5C,IACnB8C,OAAQL,EAAKK,OAAOC,MAAML,MAAM,EAAG,MAIrC,MAAO,CACN9B,aACAhB,UACAC,aACAmB,mBACAQ,eACAF,eACAI,c,0FElEIsB,E,4MACLC,MAAQ,CACPC,OAAO,G,uDAIR,SAAkBA,EAAOC,GACxBC,QAAQC,IAAIH,EAAOC,GACnBG,KAAKC,SAAS,CACbL,OAAO,M,oBAIT,WACC,OAAII,KAAKL,MAAMC,MACP,cAAC,IAAD,IAGDI,KAAKE,MAAMC,a,GAlBQC,aAsBbV,O,wJClBFW,EAAa,SAAC/D,EAAS8D,EAAWE,GAC9C,OAAQhE,GACP,IAAK,UACJ,OAAO,cAACiE,EAAA,EAAD,IACR,IAAK,UACJ,OAAOD,EAAiB,cAACF,EAAD,IAAgB,cAACG,EAAA,EAAD,IACzC,IAAK,YACJ,OAAO,cAACH,EAAD,IACR,IAAK,QACJ,OAAO,cAAC,IAAD,IACR,QACC,MAAM,IAAIlD,MAAM,8BAgFJsD,EA5EI,WAClB,MAAoCnE,mBAAS,IAA7C,mBAAOoE,EAAP,KAAmBC,EAAnB,KACA,EAA4CrE,oBAAS,GAArD,mBAAOiE,EAAP,KAAuBK,EAAvB,KACA,EAA4BtE,mBAAS,GAArC,mBAAOsB,EAAP,KAAeiD,EAAf,KACA,EAAsCvE,oBAAS,GAA/C,mBAAOwE,EAAP,KAAoBC,EAApB,KAEA,EAA8C1E,cAAtC4B,EAAR,EAAQA,aAAc1B,EAAtB,EAAsBA,QAASC,EAA/B,EAA+BA,WAE/BwE,qBAAU,WACTC,EAAUrD,GAAQ,KAEhB,IAEH,IAAMqD,EAAY,SAACrD,EAAQsD,GAChBN,GAAVM,GACAjD,EAAaL,GACXuD,KAAKC,GACLD,MAAK,kBAAM3E,EAAW,iBAGnB4E,EAAqB,SAAAC,GAC1B,IAAIC,GAAQ,EACRD,EAAcE,OAAS,IAC1BD,GAAQ,GAGTX,GAAc,SAAAD,GAAU,4BAAQA,GAAR,YAAuBW,OAC/CT,GAAkB,GAClBC,GAAU,SAAAjD,GAAM,OAAIA,EAAS,KAC7BmD,EAAeO,IAgChB,OACC,sBAAKE,UAAU,eAAf,UACElB,EAAW/D,GAAS,kBA/BvB,SAAqBkF,GACpB,IAAM/B,EAAQ+B,EAAI1D,KAAI,SAAC2D,EAAMC,GAC5B,IAAIC,EAAW,CAAE5F,UAAW,SAQ5B,MALC,wEADA0F,EAAK3C,YAGL6C,EAAW,CAAE5F,UAAW,UAIxB,oBAAYwF,UAAU,eAAtB,SACC,eAAC,IAAD,CAAMK,GAAE,kBAAaH,EAAKtD,IAA1B,UACC,qBACClC,IAAKwF,EAAK3C,UACV3C,IAAKsF,EAAKnD,KACViD,UAAU,mBACV5F,MAAOgG,IAER,qBAAKJ,UAAU,oBAAf,SAAoCE,EAAKnD,OACzC,qBAAKiD,UAAU,qBAAf,SAAqCE,EAAKxC,YATnCyC,MAeX,OAAO,oBAAIH,UAAU,eAAd,SAA8B9B,IAKToC,CAAYpB,KAAaH,GACpD,wBACCwB,QAAS,kBAAMd,EAAUrD,IACzBhC,MAAO,CAAEC,QAASiF,EAAc,OAAS,SACzCkB,SAAUzB,EACViB,UAAU,mCAJX,SAMC,qBAAKA,UAAU,QAAf,6BC5FW,G,MAAA,IAA0B,sCCA1B,MAA0B,0CCiB1BS,EAbG,WACd,OACI,sBAAKT,UAAU,cAAf,UACI,qBAAKtF,IAAKgG,EAAU9F,IAAI,aACxB,sBAAKoF,UAAU,mBAAf,mCAC0B,uBAD1B,iBAIA,qBAAKtF,IAAKiG,EAAc/F,IAAI,sB,QCGzBgG,UAXI,WAClB,OACC,qCACC,cAAC,EAAD,IACA,cAACzC,EAAA,EAAD,UACC,cAAC,EAAD","file":"static/js/7.872657e5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/error.42292aa1.gif\";","import img from './error.gif';\r\n\r\nconst ErrorMessage = () => {\r\n\treturn (\r\n\t\t<img style={{ display: 'block', width: \"250px\", height: \"250px\",objectFit: 'contain', margin: \"0 auto\"}}  src={img} alt=\"Error\"/>\r\n\t)\r\n}\r\n\r\nexport default ErrorMessage;","import { useHttp } from '../hooks/http.hook'\r\n\r\nconst useMarvelService = () => {\r\n\tconst { request, clearError, process, setProcess } = useHttp()\r\n\r\n\tconst _apiBase = 'https://gateway.marvel.com:443/v1/public/'\r\n\tconst _apiKey = 'apikey=1b84fd6221b25b51d1016d2f1d8be8a3'\r\n\tconst _baseOffset = 210\r\n\r\n\tconst getAllCharacters = async (offset = _baseOffset) => {\r\n\t\tconst res = await request(\r\n\t\t\t`${_apiBase}characters?limit=9&offset=${offset}&${_apiKey}`\r\n\t\t)\r\n\t\treturn res.data.results.map(_transformCharacter)\r\n\t}\r\n\r\n\tconst getAllComics = async (offset = 0) => {\r\n\t\tconst res = await request(\r\n\t\t\t`${_apiBase}comics?orderBy=issueNumber&limit=8&offset=${offset}&${_apiKey}`\r\n\t\t)\r\n\r\n\t\treturn res.data.results.map(_transformComics)\r\n\t}\r\n\r\n\tconst getCharacter = async id => {\r\n\t\tconst res = await request(`${_apiBase}characters/${id}?&${_apiKey}`)\r\n\t\treturn _transformCharacter(res.data.results[0])\r\n\t}\r\n\r\n\tconst getComic = async id => {\r\n\t\tconst res = await request(`${_apiBase}comics/${id}?&${_apiKey}`)\r\n\t\treturn _transformComics(res.data.results[0])\r\n\t}\r\n\r\n\tconst _transformComics = comic => {\r\n\t\treturn {\r\n\t\t\tid: comic.id,\r\n\t\t\tname: comic.title,\r\n\t\t\tdescription: comic.description || 'There is no description',\r\n\t\t\tcount: comic.pageCount\r\n\t\t\t\t? `${comic.pageCount} p.`\r\n\t\t\t\t: 'No information about the number of pages',\r\n\t\t\tlang: comic.textObjects.language || 'en-us',\r\n\t\t\tthumbnail: comic.thumbnail.path + '.' + comic.thumbnail.extension,\r\n\t\t\tprice: comic.prices.price ? `${comic.prices.price}$` : 'not available',\r\n\t\t}\r\n\t}\r\n\r\n\tconst _transformCharacter = char => {\r\n\t\treturn {\r\n\t\t\tid: char.id,\r\n\t\t\tname: char.name,\r\n\t\t\tdescription: char.description\r\n\t\t\t\t? `${char.description.slice(0, 210)}...`\r\n\t\t\t\t: 'There is no description for this character',\r\n\t\t\tthumbnail: char.thumbnail.path + '.' + char.thumbnail.extension,\r\n\t\t\thomepage: char.urls[0].url,\r\n\t\t\twiki: char.urls[1].url,\r\n\t\t\tcomics: char.comics.items.slice(0, 10),\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tclearError,\r\n\t\tprocess,\r\n\t\tsetProcess,\r\n\t\tgetAllCharacters,\r\n\t\tgetCharacter,\r\n\t\tgetAllComics,\r\n\t\tgetComic,\r\n\t}\r\n}\r\n\r\nexport default useMarvelService\r\n","import { useState, useCallback } from 'react'\r\n\r\nexport const useHttp = () => {\r\n\tconst [process, setProcess] = useState('waiting')\r\n\r\n\tconst request = useCallback(\r\n\t\tasync (\r\n\t\t\turl,\r\n\t\t\tmethod = 'GET',\r\n\t\t\tbody = null,\r\n\t\t\theaders = { 'Content-Type': 'application/json' }\r\n\t\t) => {\r\n\t\t\tsetProcess('loading')\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await fetch(url, { method, body, headers })\r\n\r\n\t\t\t\tif (!response.ok) {\r\n\t\t\t\t\tthrow new Error(`Could not fetch ${url}, status: ${response.status}`)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst data = await response.json()\r\n\r\n\t\t\t\treturn data\r\n\t\t\t} catch (e) {\r\n\t\t\t\tsetProcess('error')\r\n\t\t\t\tthrow e\r\n\t\t\t}\r\n\t\t},\r\n\t\t[]\r\n\t)\r\n\r\n\tconst clearError = useCallback(() => {\r\n\t\tsetProcess('loading')\r\n\t}, [])\r\n\r\n\treturn { request, clearError, process, setProcess }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ErrorMessage from './../errorMessage/errorMessage';\r\n\r\nclass ErrorBoundary extends Component {\r\n\tstate = {\r\n\t\terror: false,\r\n\t};\r\n\r\n\r\n\tcomponentDidCatch(error, errorInfo) {\r\n\t\tconsole.log(error, errorInfo);\r\n\t\tthis.setState({\r\n\t\t\terror: true,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.error) {\r\n\t\t\treturn <ErrorMessage/>\r\n\t\t}\r\n\r\n\t\treturn this.props.children;\r\n\t}\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","import { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport './comicsList.scss'\nimport Spinner from '../spinner/Spinner'\nimport ErrorMessage from '../errorMessage/errorMessage'\nimport useMarvelService from '../../services/MarvelService'\n\nexport const setContent = (process, Component, newItemLoading) => {\n\tswitch (process) {\n\t\tcase 'waiting':\n\t\t\treturn <Spinner />\n\t\tcase 'loading':\n\t\t\treturn newItemLoading ? <Component /> : <Spinner />\n\t\tcase 'confirmed':\n\t\t\treturn <Component />\n\t\tcase 'error':\n\t\t\treturn <ErrorMessage />\n\t\tdefault:\n\t\t\tthrow new Error('Unexpected process state')\n\t}\n}\n\nconst ComicsList = () => {\n\tconst [comicsList, setComicsList] = useState([])\n\tconst [newItemLoading, setNewItemLoading] = useState(false)\n\tconst [offset, setOffset] = useState(0)\n\tconst [comicsEnded, setComicsEnded] = useState(false)\n\n\tconst { getAllComics, process, setProcess } = useMarvelService()\n\n\tuseEffect(() => {\n\t\tonRequest(offset, true)\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\tconst onRequest = (offset, initial) => {\n\t\tinitial ? setNewItemLoading(false) : setNewItemLoading(true)\n\t\tgetAllComics(offset)\n\t\t\t.then(onComicsListLoaded)\n\t\t\t.then(() => setProcess('confirmed'))\n\t}\n\n\tconst onComicsListLoaded = newComicsList => {\n\t\tlet ended = false\n\t\tif (newComicsList.length < 8) {\n\t\t\tended = true\n\t\t}\n\n\t\tsetComicsList(comicsList => [...comicsList, ...newComicsList])\n\t\tsetNewItemLoading(false)\n\t\tsetOffset(offset => offset + 8)\n\t\tsetComicsEnded(ended)\n\t}\n\n\tfunction renderItems(arr) {\n\t\tconst items = arr.map((item, i) => {\n\t\t\tlet imgStyle = { objectFit: 'cover' }\n\t\t\tif (\n\t\t\t\titem.thumbnail ===\n\t\t\t\t'http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg'\n\t\t\t) {\n\t\t\t\timgStyle = { objectFit: 'unset' }\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<li key={i} className='comics__item'>\n\t\t\t\t\t<Link to={`/comics/${item.id}`}>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={item.thumbnail}\n\t\t\t\t\t\t\talt={item.name}\n\t\t\t\t\t\t\tclassName='comics__item-img'\n\t\t\t\t\t\t\tstyle={imgStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className='comics__item-name'>{item.name}</div>\n\t\t\t\t\t\t<div className='comics__item-price'>{item.price}</div>\n\t\t\t\t\t</Link>\n\t\t\t\t</li>\n\t\t\t)\n\t\t})\n\t\t// А эта конструкция вынесена для центровки спиннера/ошибки\n\t\treturn <ul className='comics__grid'>{items}</ul>\n\t}\n\n\treturn (\n\t\t<div className='comics__list'>\n\t\t\t{setContent(process, () => renderItems(comicsList), newItemLoading)}\n\t\t\t<button\n\t\t\t\tonClick={() => onRequest(offset)}\n\t\t\t\tstyle={{ display: comicsEnded ? 'none' : 'block' }}\n\t\t\t\tdisabled={newItemLoading}\n\t\t\t\tclassName='button button__main button__long'\n\t\t\t>\n\t\t\t\t<div className='inner'>load more</div>\n\t\t\t</button>\n\t\t</div>\n\t)\n}\n\nexport default ComicsList\n","export default __webpack_public_path__ + \"static/media/Avengers.4065c8f9.png\";","export default __webpack_public_path__ + \"static/media/Avengers_logo.9eaf2193.png\";","import './appBanner.scss';\nimport avengers from '../../resources/img/Avengers.png';\nimport avengersLogo from '../../resources/img/Avengers_logo.png';\n\nconst AppBanner = () => {\n    return (\n        <div className=\"app__banner\">\n            <img src={avengers} alt=\"Avengers\"/>\n            <div className=\"app__banner-text\">\n                New comics every week!<br/>\n                Stay tuned!\n            </div>\n            <img src={avengersLogo} alt=\"Avengers logo\"/>\n        </div>\n    )\n}\n\nexport default AppBanner;","import ComicsList from '../comicsList/ComicsList';\r\nimport AppBanner from './../appBanner/AppBanner';\r\nimport ErrorBoundary from '../errorBoundary/ErrorBoundary';\r\n\r\nconst ComicsPage = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AppBanner></AppBanner>\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<ComicsList></ComicsList>\r\n\t\t\t</ErrorBoundary>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ComicsPage;"],"sourceRoot":""}